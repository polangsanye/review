<!DOCTYPE html>
<html lang="zh-cmn-Hans">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>百度地图API</title>
 
    <!-- 如果需要拖拽鼠标进行操作，可引入以下js文件 -->
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&amp;ak=TbWpmz7Pofwv8Wif5ixCyDzkooASMEVA&amp;s=1"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"></script>
	<script type="text/javascript" src="./markerCluster.js"></script>

     <style type="text/css">
        body, html {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
    </style> 
</head>
<body>  
   <div id="allmap" style="width: 800px;height: 500px;"></div>
   <div id="r-result">请输入:<input type="text" id="suggestId" size="20" value="百度" style="width:150px;" /></div>
   <div id="searchResultPanel" style="border:1px solid #C0C0C0;width:150px;height:auto; display:none;"></div>
</body>  
</html>  
<script type="text/javascript">  

   // 百度地图API功能
	var mapInstance = new BMap.Map("allmap");
	mapInstance.centerAndZoom(new BMap.Point(116.404, 39.915), 5);
	mapInstance.enableScrollWheelZoom();
 

    const markerClusterers = [
    { lng: 120.03469, lat: 30.303904,},
    { lng: 120.088499, lat: 30.275182 },
    { lng: 120.089249, lat: 30.317759, },

    { lng: 120.161941, lat: 30.283073, },
    { lng: 120.174941, lat: 30.275073, },
    { lng: 120.186941, lat: 30.297073, },
    { lng: 120.198941, lat: 30.299073, },
  ]
 
let icon = './add.png';
  markers=[]
	for (var i=0; i < 7; i++) {
      var lng =markerClusterers[i].lng;
      var lat =markerClusterers[i].lat;
       pt = new BMap.Point(lng,lat);    
       var myIcon = new BMap.Icon(icon, new BMap.Size(20,20))

       const marker = new BMap.Marker(pt,{icon:myIcon});

       markers.push(marker);

        // 文字标签
        const label = new BMap.Label(
            '我是文字描述',
            { offset: new BMap.Size( 20, 20 ) }
        )
        label.setStyle({
        color : "red",
            fontSize : "12px",
            height : "20px",
            width:'10px',
            lineHeight : "20px",
            fontFamily:"微软雅黑"
        });
        marker.setLabel(label);
        mapInstance.addOverlay(marker);
    }
   
	//最简单的用法，生成一个marker数组，然后调用markerClusterer类即可。
	// var markerClusterer = new BMapLib.MarkerClusterer(mapInstance, {markers:markers});

    new window.BMapLib.MarkerClusterer(mapInstance, {
    markers: markers,
  })
    
</script>